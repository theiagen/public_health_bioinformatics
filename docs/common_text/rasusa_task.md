<!-- if: theiaeukillumina|theiaviral -->
??? task "`Rasusa`: Read subsampling (optional, on by default)"
<!-- endif -->
<!-- if: ont -->
??? task "`Rasusa`: Read Subsampling"
<!-- endif -->

<!-- if: theiaeukillumina -->
    To deactivate this task, set `call_rasusa` to `false`.
<!-- endif -->

    `Rasusa` is a tool to randomly subsample sequencing reads to a specified coverage without assuming that all reads are of equal length, making it especially suitable for long-read data while still being applicable to short-read data.

<!-- if: theiaviral -->
    The `Rasusa` task performs subsampling on the input raw reads. By default, it subsamples reads to a target depth of 250X, using the estimated genome length either generated by the `ncbi_identify` task or provided directly by the user. Disabled by default, users can enable it by setting the `skip_rasusa` variable to `false`. The target subsampling depth can also be adjusted by modifying the `coverage` variable.

    ??? dna "`coverage` input parameter"
        This parameter specifies the target coverage for subsampling. The default value is `250`, but users can adjust it as needed.
<!-- endif -->

<!-- if: ont|theiaeukillumina -->
    The `Rasusa` task performs subsampling on the input raw reads. By default, this task will subsample TheiaProk_ONT reads to a depth of 150X using an estimated genome length of 5 million basepairs (0.7 Mb higher than the average bacterial genome length), and TheiaEuk_ONT reads using an estimated genome length of 50 million basepairs. The estimated genome length can be changed by the user by providing a different value for the `genome_length` input parameter. The target subsampling depth can also be adjusted by modifying the `subsample_coverage` variable.
<!-- endif -->

<!-- if: theiaeukillumina -->
    For TheiaEuk_Illumina_PE, the estimated genome length is determined by the `read_screen` task. Please note that the user can prevent the task from being launched by setting the `call_rasusa` variable to false.
<!-- endif -->

    ???+ warning "Non-deterministic output(s)"
        This task may yield non-deterministic outputs since it performs _random_ subsampling. To ensure reproducibility, set a a value for the `rasusa_seed` optional input variable.

    !!! techdetails "Rasusa Technical Details"
        |  | Links |
        | --- | --- |
        | Task | [task_rasusa.wdl](https://github.com/theiagen/public_health_bioinformatics/blob/main/tasks/utilities/task_rasusa.wdl) |
        | Software Source Code | [Rasusa on GitHub](https://github.com/mbhall88/rasusa) |
        | Software Documentation | [Rasusa on GitHub](https://github.com/mbhall88/rasusa) |
        | Original Publication(s) | [Rasusa: Randomly subsample sequencing reads to a specified coverage](https://doi.org/10.21105/joss.03941) |
