
??? task "`Medaka`: Polishing of Flye assembly (default; optional)"
    Polishing is optional and can be skipped by setting the `skip_polishing` variable to true. If polishing is skipped, then neither Medaka or Racon will run.

    Medaka is the default assembly polisher used in TheiaProk. Racon may be used alternatively, and if so, Medaka will not run. Medaka uses the raw reads to polish the assembly and generate a consensus sequence. 

    Importantly, Medaka requires knowing the model that was used to generate the read data. There are several ways to provide this information:

    - Automatic Model Selection: Automatically determines the most appropriate Medaka model based on the input data, ensuring optimal polishing results without manual intervention. 
    - User-Specified Model Override: Allows users to specify a particular `Medaka model` if automatic selection does not yield the desired outcome or for specialized use cases.
    - Default Model: If both automatic model selection fails and no user-specified model is provided, Medaka defaults to the predefined fallback model `r1041_e82_400bps_sup_v5.0.0`. 

    !!! info "Medaka Model Resolution Process" 
        Medaka's automatic model selection uses the `medaka tools resolve_model` command to identify the appropriate model for polishing. This process relies on metadata embedded in the input file, which is typically generated by the basecaller. If the automatic selection fails to identify a suitable model, Medaka gracefully falls back to the default model to maintain workflow continuity. **Users should verify the chosen model and consider specifying a model override if necessary.**

    !!! techdetails "Medaka Technical Details"
        |  | Links |
        | --- | --- |
        | WDL Task | [task_medaka.wdl](https://github.com/theiagen/public_health_bioinformatics/blob/main/tasks/polishing/task_medaka.wdl) |
        | Software Source Code | [Medaka on GitHub](https://github.com/nanoporetech/medaka) |
        | Software Documentation | [Medaka Documentation](https://github.com/nanoporetech/medaka#medaka) |
